<atlassian-plugin key="${project.groupId}.${project.artifactId}"
	name="${project.name}" plugins-version="2">
	<plugin-info>
		<description>${project.description}</description>
		<version>${project.version}</version>
		<vendor name="${project.organization.name}" url="${project.organization.url}" />
		<param name="plugin-icon">images/pluginIcon.png</param>
		<param name="plugin-logo">images/pluginLogo.png</param>
	</plugin-info>

	<!-- add our i18n resource -->
	<resource type="i18n" name="i18n" location="space-blueprint" />

	<!-- add our web resources -->
	<web-resource key="space-blueprint-resources" name="space-blueprint Web Resources">

		<transformation extension="soy">
			<transformer key="soyTransformer">
				<functions>com.atlassian.confluence.plugins.soy:soy-core-functions
				</functions>
			</transformer>
			<transformation extension="js">
				<transformer key="jsI18n" />
			</transformation>
		</transformation>

		<resource type="download" name="space-blueprint.css"
			location="/css/space-blueprint.css" />
		<resource type="download" name="space-blueprint.js" location="/js/space-blueprint.js" />
		<resource type="download" name="images/" location="/images" />
		<resource type="download" name="dialog-page.js" location="/soy/dialog-page.soy" />

		<dependency>com.atlassian.auiplugin:ajs</dependency>
		<dependency>com.atlassian.confluence.plugins.confluence-create-content-plugin:space-blueprints
		</dependency>
		<!-- This dependency is not required for confluence 5.4+ -->

		<context>atl.general</context>
		<context>atl.admin</context>
	</web-resource>

	<!-- import from the product container -->
	<component-import key="applicationProperties"
		interface="com.atlassian.sal.api.ApplicationProperties" />

	<web-item key="space-blueprint-item" i18n-name-key="confluence.blueprints.space.name"
		section="system.create.space.dialog/content">
		<description key="confluence.blueprints.space.description" />
		<param name="blueprintKey" value="space-blueprint" />
	</web-item>

<!-- 1 Home page -->
	<content-template key="space-homepage-template"
		i18n-name-key="confluence.blueprints.space.homepage.name">
		<description key="confluence.blueprints.space.homepage.desc" />
		<resource name="template" type="download" location="/xml/space-home.xml" />
	</content-template>
	
<!-- Introduction page -->
	<content-template key="introduction"
		i18n-name-key="confluence.blueprints.space.introduction.name">
		<description key="confluence.blueprints.space.introduction.desc" />
		<resource name="template" type="download" location="/xml/1introduction.xml" />
	</content-template>
	
<!-- Constraints page -->
	<content-template key="constraints"
		i18n-name-key="confluence.blueprints.space.constraints.name">
		<description key="confluence.blueprints.space.constraints.desc" />
		<resource name="template" type="download" location="/xml/2constraints.xml" />
	</content-template>
	
<!-- Context page -->
	<content-template key="context"
		i18n-name-key="confluence.blueprints.space.context.name">
		<description key="confluence.blueprints.space.context.desc" />
		<resource name="template" type="download" location="/xml/3context.xml" />
	</content-template>
	
<!-- Solution page -->
	<content-template key="solution"
		i18n-name-key="confluence.blueprints.space.solution.name">
		<description key="confluence.blueprints.space.solution.desc" />
		<resource name="template" type="download" location="/xml/4solution.xml" />
	</content-template>
	
<!-- Building Block page -->
	<content-template key="buildingblock"
		i18n-name-key="confluence.blueprints.space.buildingblock.name">
		<description key="confluence.blueprints.space.buildingblock.desc" />
		<resource name="template" type="download" location="/xml/5buildingblock.xml" />
	</content-template>
	
<!-- Runtime View page -->
	<content-template key="runtimeview"
		i18n-name-key="confluence.blueprints.space.runtimeview.name">
		<description key="confluence.blueprints.space.runtimeview.desc" />
		<resource name="template" type="download" location="/xml/6runtimeview.xml" />
	</content-template>
	
<!-- Deployment View page -->
	<content-template key="deploymentview"
		i18n-name-key="confluence.blueprints.space.deploymentview.name">
		<description key="confluence.blueprints.space.deploymentview.desc" />
		<resource name="template" type="download" location="/xml/7deploymentview.xml" />
	</content-template>
	
<!-- Concepts page -->
	<content-template key="concepts"
		i18n-name-key="confluence.blueprints.space.concepts.name">
		<description key="confluence.blueprints.space.concepts.desc" />
		<resource name="template" type="download" location="/xml/8concepts.xml" />
	</content-template>
	
<!-- Design Decisions page -->
	<content-template key="designdecisions"
		i18n-name-key="confluence.blueprints.space.designdecisions.name">
		<description key="confluence.blueprints.space.designdecisions.desc" />
		<resource name="template" type="download" location="/xml/9designdecisions.xml" />
	</content-template>
	
<!-- Quality page -->
	<content-template key="quality"
		i18n-name-key="confluence.blueprints.space.quality.name">
		<description key="confluence.blueprints.space.quality.desc" />
		<resource name="template" type="download" location="/xml/10quality.xml" />
	</content-template>
	
<!-- Technical Risks page -->
	<content-template key="technicalrisks"
		i18n-name-key="confluence.blueprints.space.technicalrisks.name">
		<description key="confluence.blueprints.space.technicalrisks.desc" />
		<resource name="template" type="download" location="/xml/11technicalrisks.xml" />
	</content-template>
	
<!-- Glossary page -->
	<content-template key="glossary"
		i18n-name-key="confluence.blueprints.space.glossary.name">
		<description key="confluence.blueprints.space.glossary.desc" />
		<resource name="template" type="download" location="/xml/12glossary.xml" />
	</content-template>

<!-- Definition of the space blueprint and the dialog wizard -->
	<space-blueprint key="space-blueprint"
		i18n-name-key="confluence.blueprints.space.name" category="Architecture">
		 <content-template ref="space-homepage-template">
		     <content-template ref="introduction"/>
		     <content-template ref="constraints"/>
		     <content-template ref="context"/>
		     <content-template ref="solution"/>
		     <content-template ref="buildingblock"/>
		     <content-template ref="runtimeview"/>
		     <content-template ref="deploymentview"/>
		     <content-template ref="concepts"/>
		     <content-template ref="designdecisions"/>
		     <content-template ref="quality"/>
		     <content-template ref="technicalrisks"/>
		     <content-template ref="glossary"/>
		 </content-template>

		<dialog-wizard key="space-blueprint-wizard">
			<dialog-page id="exampleSpaceId"
				template-key="Confluence.SpaceBlueprints.Arc.dialogForm"
				title-key="confluence.blueprints.space.dialog.create.title"
				description-header-key="confluence.blueprints.space.dialog.create.heading"
				description-content-key="confluence.blueprints.space.dialog.create.description"
				last="true" />
		</dialog-wizard>
	</space-blueprint>

</atlassian-plugin>